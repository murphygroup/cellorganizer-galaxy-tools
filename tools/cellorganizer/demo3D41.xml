<tool id="demo3D41" name="demo3D41" version="0.0.1">
  <description>Train with OME.TIFF.</description>
  <command>
    matlab -r "
    diary on; 
    current_directory = pwd; 
    cellorganizer_directory = getenv('CELLORGANIZER'); 
    cd( '~/CellOrganizor/build/cellorganizer3/' ); 
    setup(); 
    cd( current_directory ); 
    check_if_files_exist_on_disk_and_link_them('$dataset'); 
    demo3D41_galaxy('$proteinname','$nucleusname','$modelname','$nucleustype','$nucleusclass','$celltype','$cellclass','$proteintype','$proteinclass','$verbose','$debug');
    diary off; 
    exit
    "
  </command>
  <inputs>
	  <param name="dataset" type="data" label="Choose a data set for training" multiple="true" optional="false" />
    <param name="modelname" type="text" value="default" label="Provide a name for the model"/>
    <param name="nucleustype" type="select" label="Select a nuclear model type">
      <option value="medial_axis">medial axis</option>
      <option value="cylindrical_surface" selected="true">cylindrical surface</option>
      <option value="diffeomorphic">diffeomorphic</option>
    </param>
    <param name="nucleusname" type="text" value="default" label="Provide an (optional) name for the nuclear model"/>
    <param name="nucleusclass" type="select" label="Select nuclear model class">
      <option value="nuclear_membrane" selected="true">nucleus</option>
      <option value="framework">framework</option>
    </param>
    <param name="celltype" type="select" label="Select a cell model type">
      <option value="ratio" selected="true">ratio</option>
      <option value="diffeomorphic">diffeomorphic</option>
    </param>
    <param name="cellclass" type="select" label="Select a cell model class">
      <option value="cell_membrane" selected="true">cell</option>
    </param>
    <param name="proteintype" type="select" label="Select a protein model type">
      <option value="gmm" selected="true">gmm</option>
    </param>
    <param name="proteinname" type="text" value="default" label="Provide an (optional) name for the protein model"/>
    <param name="proteinclass" type="select" label="Select a protein model class">
      <option value="vesicle" selected="true">vesicle</option>
    </param>
    <!-- <param name="documentation" type="text" value="default" label="Provide any (optional) documentation for the model or images used in training"/> -->
    <param name="verbose" type="select" label="If true, print all information provided during training (advanced feature)">
      <option value="false">False</option>
      <option value="true" selected="true">True</option>
    </param>
    <param name="debug" type="select" label="If true, save intermediate results (advanced feature)">
      <option value="false" selected="true">False</option>
      <option value="true">True</option>
    </param>      
  </inputs>
  <outputs>
    <data type="mat" name="output" from_work_dir="model.mat"/>
  </outputs>
<help>

**Description**

Train 3D generative model of the nucleus, cell shape, and lysosome from
all LAMP2 images in the Murphy Lab 3D HeLa dataset that are either in the
current directory or in the demo3D11 directory.

-----

**Input**

* a directory of raw or synthetic nucleus images
* a directory of raw or synthetic cell shape images
* a directory of raw or synthetic lysosome images
* the resolution of the images (all images should have the same
  resolution)

-----

**Output**

* a valid SLML model file

</help>
</tool>
