<tool id="show_shape_space" name="Display" version="0.0.1">
  <description> shape space plot.</description>
  <command>
    matlab -r "diary diary.txt;
    tic;
    current_directory = pwd; 
    cellorganizer_directory = getenv('CELLORGANIZER'); 
    cd( cellorganizer_directory ); 
    setup(); 
    cd( current_directory );
    check_if_files_exist_on_disk_and_link_them_mat('$input');

    NUMBER_OF_LABELS=str2num('$number_of_labels');
    GRID_SIZE=str2num('$grid_size');
    DRAW_TRACES=false;

    file = './model00001.mat';
    options.nlabels = NUMBER_OF_LABELS;
    options.traces = false;
    options.subsize = GRID_SIZE;

    show_shape_space_figure_galaxy_wrapper( file, options );

    exit;";
  </command>
  <inputs>
    <param format="mat" name="input" type="data" label="Select diffeomorphic model"></param>
    <param name="number_of_labels" type="integer" value="5" label="Number of Labels"/>
    <param name="grid_size" type="integer" value="50" label="Grid Size"/>
  </inputs>
  <outputs>
    <data format="png" name="output" from_work_dir="show_shape_space.png"/>
  </outputs>
<tests>
  <test>
    <param name="input" value="helamodel_9_16_15.mat" ftype="mat"/>
    <param name="number_of_labels" value="5" type="integer"/>
    <param name="grid_size" value="50" type="integer"/>
    <output value="script.m" ftype="mat"/>
  </test>
</tests>

<help>

**Description**

The shape space plot tool creates a visualization of the shape space from a trained diffeomorphic model.

-----

**Inputs**

- A model

-----

**Output**

- A PNG file

-----

**Example**

.. image:: https://raw.githubusercontent.com/icaoberg/cellorganizer-galaxy-tools/dev/tools/cellorganizer/images/shape_space.png
  :height: 250
  :target: https://raw.githubusercontent.com/icaoberg/cellorganizer-galaxy-tools/dev/tools/cellorganizer/images/shape_space.png

</help>
</tool>
